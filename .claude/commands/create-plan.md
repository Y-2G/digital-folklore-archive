# Create Plan Command

仕様や要求から実装計画を作成します。project-orchestratorエージェントを使用して、複雑なタスクを分析し、適切なサブタスクに分解した計画ドキュメントを生成します。

## Input

ユーザーからの入力: $ARGUMENTS

$ARGUMENTSが空の場合は、ユーザーに要件や仕様を尋ねてください。

## Instructions

1. **要件の収集・確認**
   - ユーザーから提供された仕様や要求を分析
   - 不明確な点があれば質問して明確化
   - 既存の設計ドキュメント（`docs/design/`）を参照して整合性を確認

2. **project-orchestratorを起動**
   以下の観点で作業を分析・計画化：
   - スコープ評価（変更範囲の特定）
   - ドメイン識別（必要な専門領域の特定）
   - 依存関係マッピング（並列実行可能なタスクの特定）
   - リスク評価（潜在的なブロッカーや品質懸念）

3. **計画ドキュメントの生成**
   `docs/tasks/`に以下の形式で計画ファイルを作成：
   ```
   # [計画タイトル]

   ## 概要
   [目的と背景の説明]

   ## 作業分析
   [スコープ、影響範囲、リスク]

   ## タスク分解
   | ID | タスク | 担当エージェント | 依存関係 | 規模 | 状態 |
   |----|--------|------------------|----------|------|------|
   | T1 | ...    | backend-specialist | -      | M    | [ ]  |
   | T2 | ...    | frontend-implementer | T1   | L    | [ ]  |

   ## 実行計画
   ### Phase 1: [並列実行可能なタスク群]
   - [ ] T1: ...
   - [ ] T3: ...

   ### Phase 2: [Phase 1完了後のタスク]
   - [ ] T2: ...

   ## 品質チェックリスト
   - [ ] 設計ドキュメントとの整合性確認
   - [ ] i18n対応（日本語/英語）
   - [ ] テスト実装
   - [ ] コードレビュー

   ## 関連ファイル
   - 影響を受けるファイル一覧
   - 参照すべき設計ドキュメント
   ```

4. **ファイル命名規則**
   - 新規計画: `docs/tasks/tasks-XXX.md`（XXXは次の連番）
   - または: `docs/tasks/plan-[feature-name].md`

5. **完了報告**
   - 作成した計画ファイルのパスを報告
   - 主要なタスク数と推定規模のサマリー
   - `/execute-plan [ファイルパス]`で実行可能であることを案内

## Project Context

- このプロジェクトはDigital Folklore Archive（デジタル伝承資料庫）です
- 実装前に必ず設計ドキュメントを作成するルールがあります
- 既存のタスクリスト: `docs/tasks/tasks-001.md`
- 日本語/英語の二言語対応が必要です
- ライブラリ/アーカイブの美学（クリーン、ミニマル）を重視

## Available Agents

計画で使用できるエージェント:
- `backend-specialist`: Firestore操作、API、サーバーサイドロジック
- `frontend-implementer`: Reactコンポーネント、ページ、UI実装
- `infra-implementer`: Firebase設定、環境構成、デプロイ
- `frontend-architect`: フロントエンド設計、コンポーネント構造
- `backend-architect`: バックエンド設計、データモデル、API設計
- `infra-architect`: インフラ設計、クラウドアーキテクチャ
- `multi-perspective-reviewer`: 複数観点からのレビュー
